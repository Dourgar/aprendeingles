<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprende Inglés con Douglas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1f1f1; 
            color: #333;
            background-image: url('https://images.unsplash.com/photo-1549057442-5f6531557007?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .bg-overlay {
            background-color: rgba(255, 255, 255, 0.85);
        }
        .container {
            max-width: 1200px;
        }
        .card {
            background-color: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            padding: 2.5rem;
        }
        .correct-answer {
            color: #28a745;
            font-weight: 600;
        }
        .incorrect-answer {
            color: #dc3545;
            font-weight: 600;
        }
        .disabled-button {
            background-color: #d1d5db;
            cursor: not-allowed;
        }
        .quiz-option {
            transition: all 0.2s ease-in-out;
        }
        .quiz-option:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .header-content {
            background-color: #1a202c;
            color: #fff;
            border-bottom-left-radius: 16px;
            border-bottom-right-radius: 16px;
            box-shadow: 0 4px 116px rgba(0, 0, 0, 0.1);
        }
        .footer-content {
            background-color: #1a202c;
            color: #fff;
            border-top-left-radius: 16px;
            border-top-right-radius: 16px;
            box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="p-4 sm:p-8 flex flex-col min-h-screen">
    <header class="w-full py-4 text-center header-content mb-8">
        <h1 class="text-3xl sm:text-4xl font-bold">Aprende Inglés con Douglas</h1>
        <h2 class="text-2xl sm:text-3xl font-bold">Módulo de Inglés Básico</h2>
        <p class="text-sm sm:text-base text-gray-400 mt-2">¡Aprende y practica de forma interactiva!</p>
    </header>

    <main class="flex-grow flex justify-center items-center">
        <div id="app-container" class="container mx-auto">
            <div id="main-menu" class="card space-y-8 bg-overlay">
                <div class="text-center">
                    <img src="https://placehold.co/600x100/505ad5/ffffff?text= ¡Te damos la bienvenida!" alt="Welcome to English Module" class="mx-auto rounded-lg mb-4">
                    <p class="text-center text-lg text-gray-600">Aquí puedes repasar los temas y poner a prueba tus conocimientos, Escoje el tema que quieras y comienza tu aventura de aprendizaje.</p>
                </div>
                <nav class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <button onclick="showSection('adjetivos-posesivos')" class="bg-indigo-600 text-white p-6 rounded-lg font-semibold text-lg hover:bg-indigo-700 transition duration-300 transform hover:scale-105">
                        <i class="fas fa-hand-holding fa-lg mr-2"></i> Adjetivos Posesivos
                    </button>
                    <button onclick="showSection('adjetivos')" class="bg-indigo-600 text-white p-6 rounded-lg font-semibold text-lg hover:bg-indigo-700 transition duration-300 transform hover:scale-105">
                        <i class="fas fa-palette fa-lg mr-2"></i> Adjetivos
                    </button>
                    <button onclick="showSection('pronombres-demostrativos')" class="bg-indigo-600 text-white p-6 rounded-lg font-semibold text-lg hover:bg-indigo-700 transition duration-300 transform hover:scale-105">
                        <i class="fas fa-map-signs fa-lg mr-2"></i> Pronombres Demostrativos
                    </button>
                    <button onclick="showSection('presente-simple')" class="bg-indigo-600 text-white p-6 rounded-lg font-semibold text-lg hover:bg-indigo-700 transition duration-300 transform hover:scale-105">
                        <i class="fas fa-clock fa-lg mr-2"></i> Presente Simple
                    </button>
                    <button onclick="showSection('pronombres')" class="bg-indigo-600 text-white p-6 rounded-lg font-semibold text-lg hover:bg-indigo-700 transition duration-300 transform hover:scale-105">
                        <i class="fas fa-user-friends fa-lg mr-2"></i> Pronombres de Sujeto y Objeto
                    </button>
                    <button onclick="showSection('there-be')" class="bg-indigo-600 text-white p-6 rounded-lg font-semibold text-lg hover:bg-indigo-700 transition duration-300 transform hover:scale-105">
                        <i class="fas fa-box fa-lg mr-2"></i> There be (There is / There are)
                    </button>
                </nav>
            </div>

            <div id="section-template" class="hidden">
                <div class="card space-y-6 bg-overlay">
                    <h2 id="section-title" class="text-3xl font-semibold text-center text-gray-700"></h2>
                    <div id="section-content" class="text-gray-700 space-y-4"></div>
                    <div class="flex justify-center mt-8">
                        <button onclick="showQuiz()" class="bg-teal-500 text-white py-3 px-8 rounded-full font-semibold hover:bg-teal-600 transition duration-300 transform hover:scale-105">
                            <i class="fas fa-question-circle mr-2"></i> Ir al Quiz
                        </button>
                    </div>
                    <button onclick="showMainMenu()" class="mt-4 text-gray-500 hover:text-gray-700 transition duration-300">
                        &larr; Volver al Menú
                    </button>
                </div>
            </div>

            <div id="quiz-template" class="hidden">
                <div class="card space-y-6 bg-overlay">
                    <div class="flex flex-col sm:flex-row justify-between items-center mb-6">
                        <h2 id="quiz-title" class="text-2xl font-semibold text-gray-700">Quiz: </h2>
                        <div id="timer" class="text-xl font-bold text-red-500 mt-2 sm:mt-0">15:00</div>
                    </div>
                    <div id="quiz-questions" class="space-y-6"></div>
                    <div id="quiz-results" class="hidden mt-8 text-center">
                        <h3 class="text-3xl font-bold text-gray-800">Resultados del Quiz</h3>
                        <p id="score-text" class="text-xl mt-4"></p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="w-full py-4 text-center footer-content mt-8">
        <p class="text-gray-400">© 2025 Aprende Inglés con Douglas. Todos los derechos reservados.</p>
        <div class="flex justify-center mt-2 space-x-4 text-gray-500">
            <a href="#" class="hover:text-white transition-colors duration-300"><i class="fab fa-facebook fa-lg"></i></a>
            <a href="#" class="hover:text-white transition-colors duration-300"><i class="fab fa-twitter fa-lg"></i></a>
            <a href="#" class="hover:text-white transition-colors duration-300"><i class="fab fa-instagram fa-lg"></i></a>
        </div>
    </footer>

    <script>
        const sections = {
            'adjetivos-posesivos': {
                title: 'Adjetivos Posesivos (Possessive Adjectives)',
                content: `
                    <h3 class="text-2xl font-semibold">Concepto</h3>
                    <p>Los adjetivos posesivos indican a quién o a quiénes le pertenece algo. Se usan siempre junto a un sustantivo (noun).</p>
                    <h3 class="text-2xl font-semibold mt-4">Regla principal</h3>
                    <p>Se colocan <strong>antes</strong> del sustantivo que describen.</p>
                    <h3 class="text-2xl font-semibold mt-4">Ejemplos clave</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>My</strong> (mi/mis): <strong>My</strong> name is Ana.</li>
                        <li><strong>Your</strong> (tu/tus): <strong>Your</strong> house is big.</li>
                        <li><strong>His</strong> (su, de él): <strong>His</strong> car is red.</li>
                        <li><strong>Her</strong> (su, de ella): <strong>Her</strong> bag is small.</li>
                        <li><strong>Its</strong> (su, de eso/animal): <strong>Its</strong> tail is long.</li>
                        <li><strong>Our</strong> (nuestro/a): <strong>Our</strong> family is nice.</li>
                        <li><strong>Their</strong> (su, de ellos/as): <strong>Their</strong> dog is cute.</li>
                    </ul>
                `,
                quiz: [
                    { type: 'multiple-choice', question: '¿Cuál es el adjetivo posesivo para "I"?', options: ['Your', 'My', 'His'], answer: 'My' },
                    { type: 'true-false', question: '¿Los adjetivos posesivos van después del sustantivo?', answer: false },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "This is _____ book." (You)', answer: 'your' },
                    { type: 'multiple-choice', question: 'Si la dueña es una mujer, ¿qué adjetivo posesivo usarías para referirte a su bolso?', options: ['His', 'Her', 'Our'], answer: 'Her' },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "The dog is wagging _____ tail." (It)', answer: 'its' },
                    { type: 'true-false', question: '¿"Their" se usa para un solo dueño?', answer: false },
                    { type: 'multiple-choice', question: '¿Cuál es el adjetivo posesivo para "We"?', options: ['They', 'Our', 'Your'], answer: 'Our' },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "_____ name is Pedro." (He)', answer: 'His' },
                    { type: 'true-false', question: '¿"My" solo se usa para singular?', answer: false },
                    { type: 'multiple-choice', question: '¿Qué adjetivo posesivo usarías para hablar del auto de tus amigos?', options: ['Our', 'My', 'Their'], answer: 'Their' }
                ]
            },
            'adjetivos': {
                title: 'Adjetivos (Adjectives)',
                content: `
                    <h3 class="text-2xl font-semibold">Concepto</h3>
                    <p>Son palabras que describen sustantivos, respondiendo a las preguntas "¿cómo es?" o "¿cómo está?".</p>
                    <h3 class="text-2xl font-semibold mt-4">Reglas y consejos</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>Ubicación:</strong> Los adjetivos siempre van <strong>antes</strong> del sustantivo en inglés (ejemplo: a <strong>red</strong> apple).</li>
                        <li><strong>Plural:</strong> No tienen forma plural. Si el sustantivo es plural, el adjetivo se mantiene igual (ejemplo: two <strong>delicious</strong> cookies).</li>
                        <li><strong>Género:</strong> No tienen género. Se usan de la misma forma para sustantivos masculinos o femeninos (ejemplo: a <strong>good</strong> mom, a <strong>good</strong> dad).</li>
                    </ul>
                    <h3 class="text-2xl font-semibold mt-4">Ejemplos clave</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li>A <strong>red</strong> apple (Una manzana roja)</li>
                        <li>A <strong>happy</strong> boy (Un chico feliz)</li>
                        <li>My cats are <strong>small</strong> (Mis gatos son pequeños)</li>
                    </ul>
                `,
                quiz: [
                    { type: 'true-false', question: '¿Los adjetivos en inglés se colocan después del sustantivo?', answer: false },
                    { type: 'multiple-choice', question: '¿Qué adjetivo describe a un sustantivo?', options: ['Run', 'Big', 'Quickly'], answer: 'Big' },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "She has a _____ house." (beautiful)', answer: 'beautiful' },
                    { type: 'true-false', question: '¿Los adjetivos tienen género en inglés?', answer: false },
                    { type: 'multiple-choice', question: '¿Cuál de estos es un adjetivo?', options: ['Walk', 'Car', 'Tall'], answer: 'Tall' },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "The _____ children are playing." (happy)', answer: 'happy' },
                    { type: 'true-false', question: '¿Los adjetivos en inglés no tienen forma plural?', answer: true },
                    { type: 'multiple-choice', question: '¿Cómo dirías "libros interesantes"?', options: ['Books interesting', 'Interesting books', 'Books are interesting'], answer: 'Interesting books' },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "The soup is _____." (hot)', answer: 'hot' },
                    { type: 'true-false', question: '¿"Good" es un adjetivo que cambia con el género?', answer: false }
                ]
            },
            'pronombres-demostrativos': {
                title: 'Pronombres Demostrativos (Demonstrative Pronouns)',
                content: `
                    <h3 class="text-2xl font-semibold">Concepto</h3>
                    <p>Se utilizan para señalar personas, animales o cosas, e indican si están cerca o lejos.</p>
                    <h3 class="text-2xl font-semibold mt-4">Reglas principales</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>Cerca:</strong> Se usa <strong>this</strong> para singular y <strong>these</strong> para plural.</li>
                        <li><strong>Lejos:</strong> Se usa <strong>that</strong> para singular y <strong>those</strong> para plural.</li>
                    </ul>
                    <h3 class="text-2xl font-semibold mt-4">Ejemplos clave</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>This</strong> is my pen. (<strong>Este</strong> es mi bolígrafo.)</li>
                        <li><strong>These</strong> are my pens. (<strong>Estos</strong> son mis bolígrafos.)</li>
                        <li><strong>That</strong> is his shoe. (<strong>Ese</strong> es su zapato.)</li>
                        <li><strong>Those</strong> are his shoes. (<strong>Esos</strong> son sus zapatos.)</li>
                    </ul>
                `,
                quiz: [
                    { type: 'multiple-choice', question: '¿Qué pronombre usarías para señalar un libro que tienes en la mano?', options: ['That', 'These', 'This'], answer: 'This' },
                    { type: 'true-false', question: '¿"Those" se usa para cosas que están lejos y son singulares?', answer: false },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "I love _____ shirt." (cerca, singular)', answer: 'this' },
                    { type: 'multiple-choice', question: '¿Qué pronombre usarías para hablar de los autos que están lejos?', options: ['These', 'That', 'Those'], answer: 'Those' },
                    { type: 'true-false', question: '¿"This" y "These" se usan para referirse a cosas que están cerca?', answer: true },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "_____ are my friends." (cerca, plural)', answer: 'These' },
                    { type: 'multiple-choice', question: '¿Cuál es la forma plural de "That"?', options: ['This', 'Those', 'These'], answer: 'Those' },
                    { type: 'true-false', question: '¿"That" se usa para cosas que están lejos?', answer: true },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "Look at _____ bird over there." (lejos, singular)', answer: 'that' },
                    { type: 'multiple-choice', question: '¿Qué pronombre usarías para hablar de varios libros que están en la mesa de enfrente?', options: ['These', 'Those', 'This'], answer: 'Those' }
                ]
            },
            'presente-simple': {
                title: 'Presente Simple (Simple Present)',
                content: `
                    <h3 class="text-2xl font-semibold">Concepto</h3>
                    <p>Es un tiempo verbal que se usa para hablar de acciones habituales o hechos en el presente.</p>
                    <h3 class="text-2xl font-semibold mt-4">Reglas de conjugación</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li>Para los pronombres <strong>I, you, we, they</strong>, el verbo no cambia.</li>
                        <li>Para la tercera persona del singular (<strong>he, she, it</strong>), se añade una <strong>-s</strong> al final del verbo.</li>
                    </ul>
                `,
                quiz: [
                    { type: 'multiple-choice', question: '¿Cómo se conjuga el verbo "to work" con "She"?', options: ['work', 'works', 'working'], answer: 'works' },
                    { type: 'true-false', question: '¿El verbo cambia para "I" en presente simple?', answer: false },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "We _____ in a big house." (live)', answer: 'live' },
                    { type: 'multiple-choice', question: '¿Qué pronombre personal no sigue la regla de la "-s"?', options: ['He', 'It', 'You'], answer: 'You' },
                    { type: 'true-false', question: '¿La tercera persona del singular es "he, she, they"?', answer: false },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "He _____ to the park every day." (go)', answer: 'goes' },
                    { type: 'multiple-choice', question: '¿Cómo se conjuga el verbo "to play" con "They"?', options: ['play', 'plays', 'playing'], answer: 'play' },
                    { type: 'true-false', question: '¿"She reads" es un ejemplo correcto del presente simple?', answer: true },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "The sun _____." (shine)', answer: 'shines' },
                    { type: 'true-false', question: '¿El verbo "to study" con "I" se conjuga como "I studies"?', answer: false }
                ]
            },
            'pronombres': {
                title: 'Pronombres de Sujeto y Objeto',
                content: `
                    <h3 class="text-2xl font-semibold">Concepto</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li>Los pronombres de <strong>sujeto</strong> (I, you, he, etc.) realizan la acción en la oración.</li>
                        <li>Los pronombres de <strong>objeto</strong> (me, you, him, etc.) reciben la acción.</li>
                    </ul>
                    <h3 class="text-2xl font-semibold mt-4">Ejemplos clave</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>Sujeto:</strong> <strong>I</strong> am a student. (<strong>Yo</strong> soy un estudiante.)</li>
                        <li><strong>Objeto:</strong> Give <strong>me</strong> the book. (Dame <strong>el libro</strong>.)</li>
                        <li><strong>Sujeto:</strong> <strong>She</strong> is my sister. (<strong>Ella</strong> es mi hermana.)</li>
                        <li><strong>Objeto:</strong> I know <strong>her</strong>. (La conozco a <strong>ella</strong>.)</li>
                    </ul>
                `,
                quiz: [
                    { type: 'multiple-choice', question: '¿Qué pronombre usarías para referirte a "Ana" en una oración como sujeto?', options: ['Her', 'She', 'Him'], answer: 'She' },
                    { type: 'true-false', question: '¿El pronombre de objeto "him" reemplaza a un hombre?', answer: true },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "Call _____." (Samuel)', answer: 'him' },
                    { type: 'multiple-choice', question: '¿Cuál es el pronombre de objeto para "we"?', options: ['us', 'them', 'we'], answer: 'us' },
                    { type: 'true-false', question: '¿Los pronombres de sujeto reciben la acción?', answer: false },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "My family and I are happy. _____ are happy." (Nosotros)', answer: 'We' },
                    { type: 'multiple-choice', question: 'En "She is looking at him", ¿qué pronombre es el objeto?', options: ['She', 'is', 'him'], answer: 'him' },
                    { type: 'true-false', question: '¿"They" es un pronombre de objeto?', answer: false },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "I love my dog. I love _____." (it)', answer: 'it' },
                    { type: 'multiple-choice', question: '¿Qué pronombre de objeto usarías para referirte a "mis amigos"?', options: ['us', 'you', 'them'], answer: 'them' }
                ]
            },
            'there-be': {
                title: 'There be (There is / There are)',
                content: `
                    <h3 class="text-2xl font-semibold">Concepto</h3>
                    <p>Se usa para indicar la existencia de algo, equivalente a la conjugación de "haber" en español ("hay").</p>
                    <h3 class="text-2xl font-semibold mt-4">Reglas principales</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>There is</strong> se usa para sustantivos en singular. Se puede contraer a <strong>There's</strong>.</li>
                        <li><strong>There are</strong> se usa para sustantivos en plural y <strong>no</strong> se contrae.</li>
                    </ul>
                    <h3 class="text-2xl font-semibold mt-4">Ejemplos clave</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>There is</strong> an apple. (Hay una manzana.)</li>
                        <li><strong>There are</strong> five dogs. (Hay cinco perros.)</li>
                        <li><strong>Negación:</strong> Se añade <strong>not</strong> después de \`is\` o \`are\` (ejemplo: <strong>There is not</strong> an apple).</li>
                        <li><strong>Pregunta:</strong> Se invierte el orden del verbo (ejemplo: <strong>Is there</strong> an apple?).</li>
                    </ul>
                `,
                quiz: [
                    { type: 'multiple-choice', question: '¿Qué usarías para decir que hay una silla?', options: ['There are a chair', 'There is a chair', 'There is some chairs'], answer: 'There is a chair' },
                    { type: 'true-false', question: '¿"There are" se puede contraer a "There\'re"?', answer: false },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "_____ two books on the table."', answer: 'There are' },
                    { type: 'multiple-choice', question: 'Para preguntar si hay agua, ¿cómo iniciarías la oración?', options: ['Are there', 'Is there', 'There is'], answer: 'Is there' },
                    { type: 'true-false', question: '¿"There is not" es la forma correcta de negar para singular?', answer: true },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "_____ a cat in the garden."', answer: 'There is' },
                    { type: 'multiple-choice', question: '¿Qué usarías para decir que no hay cinco perros?', options: ['There is not five dogs', 'There aren\'t five dogs', 'There not are five dogs'], answer: 'There aren\'t five dogs' },
                    { type: 'true-false', question: '¿"There is" se usa para sustantivos en plural?', answer: false },
                    { type: 'fill-in-the-blank', question: 'Completa la frase: "_____ not a car outside."', answer: 'There is' },
                    { type: 'multiple-choice', question: 'Para preguntar si hay diez personas en la sala, ¿cómo iniciarías la oración?', options: ['Is there', 'Are there', 'There are'], answer: 'Are there' }
                ]
            }
        };

        let currentSection = '';
        let timerInterval;
        let startTime; 
        let timeLeft = 900;

        const mainMenu = document.getElementById('main-menu');
        const sectionTemplate = document.getElementById('section-template');
        const quizTemplate = document.getElementById('quiz-template');

        function showSection(sectionId) {
            currentSection = sectionId;
            mainMenu.classList.add('hidden');
            quizTemplate.classList.add('hidden');
            
            sectionTemplate.querySelector('#section-title').innerText = sections[sectionId].title;
            sectionTemplate.querySelector('#section-content').innerHTML = sections[sectionId].content;
            sectionTemplate.classList.remove('hidden');
        }

        function showQuiz() {
            sectionTemplate.classList.add('hidden');
            
            quizTemplate.querySelector('#quiz-title').innerText = 'Quiz: ' + sections[currentSection].title;
            const quizQuestionsContainer = quizTemplate.querySelector('#quiz-questions');
            const quizData = sections[currentSection].quiz;

            quizQuestionsContainer.innerHTML = '';
            quizData.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.id = `question-${index}`;
                questionDiv.classList.add('mb-6');

                const questionText = document.createElement('p');
                questionText.classList.add('text-lg', 'font-medium', 'mb-3');
                questionText.innerHTML = `${index + 1}. ${q.question}`;
                questionDiv.appendChild(questionText);
                
                if (q.type === 'multiple-choice') {
                    q.options.forEach(option => {
                        const button = document.createElement('button');
                        button.classList.add('quiz-option', 'bg-gray-200', 'hover:bg-gray-300', 'p-3', 'rounded-lg', 'w-full', 'text-left', 'mb-2');
                        button.innerText = option;
                        button.onclick = () => checkAnswer(button, option, q.answer, index, q.type);
                        questionDiv.appendChild(button);
                    });
                } else if (q.type === 'true-false') {
                    ['Verdadero', 'Falso'].forEach(option => {
                        const button = document.createElement('button');
                        button.classList.add('quiz-option', 'bg-gray-200', 'hover:bg-gray-300', 'p-3', 'rounded-lg', 'w-full', 'text-left', 'mb-2');
                        button.innerText = option;
                        const userChoice = (option === 'Verdadero');
                        button.onclick = () => checkAnswer(button, userChoice, q.answer, index, q.type);
                        questionDiv.appendChild(button);
                    });
                } else if (q.type === 'fill-in-the-blank') {
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.classList.add('p-2', 'rounded-lg', 'border', 'border-gray-300', 'w-full', 'mb-2');
                    const checkButton = document.createElement('button');
                    checkButton.classList.add('bg-blue-500', 'text-white', 'py-2', 'px-4', 'rounded-lg', 'hover:bg-blue-600', 'transition');
                    checkButton.innerText = 'Revisar';
                    checkButton.onclick = () => checkAnswer(input, input.value.trim().toLowerCase(), q.answer.toLowerCase(), index, q.type);
                    questionDiv.appendChild(input);
                    questionDiv.appendChild(checkButton);
                }
                quizQuestionsContainer.appendChild(questionDiv);
            });
            
            quizTemplate.classList.remove('hidden');
            startTimer();
        }

        let correctAnswers = 0;
        let incorrectAnswers = 0;
        const answeredQuestions = new Set();
        let allAnswered = false;

        function checkAnswer(element, userChoice, correctAnswer, questionIndex, type) {
            if (answeredQuestions.has(questionIndex)) return;

            const parentDiv = document.getElementById(`question-${questionIndex}`);
            const feedbackDiv = document.createElement('div');
            feedbackDiv.classList.add('mt-2', 'font-semibold');

            const isCorrect = userChoice === correctAnswer;

            if (isCorrect) {
                correctAnswers++;
                feedbackDiv.classList.add('correct-answer');
                feedbackDiv.innerText = '¡Fantástico! Tu respuesta es correcta. ¡Sigue así!';
                if (type !== 'fill-in-the-blank' && element.style) {
                    element.style.backgroundColor = '#d4edda';
                }
            } else {
                incorrectAnswers++;
                feedbackDiv.classList.add('incorrect-answer');
                feedbackDiv.innerText = `¡No te rindas! La respuesta correcta es "${correctAnswer}". Repasa la teoría y vuelve a intentarlo.`;
                if (type !== 'fill-in-the-blank' && element.style) {
                    element.style.backgroundColor = '#f8d7da';
                }
            }

            if (type === 'multiple-choice' || type === 'true-false') {
                const options = parentDiv.querySelectorAll('.quiz-option');
                options.forEach(btn => {
                    btn.classList.add('disabled-button');
                    btn.disabled = true;
                    const btnText = (btn.innerText === 'Verdadero' || btn.innerText === 'Falso') ? (btn.innerText === 'Verdadero') : btn.innerText;
                    if (btnText === correctAnswer) {
                        btn.style.backgroundColor = '#d4edda';
                        btn.style.borderColor = '#28a745';
                    }
                });
            } else if (type === 'fill-in-the-blank') {
                parentDiv.querySelector('input').disabled = true;
                parentDiv.querySelector('button').classList.add('disabled-button');
                parentDiv.querySelector('button').disabled = true;
            }

            parentDiv.appendChild(feedbackDiv);
            answeredQuestions.add(questionIndex);
            
            if (answeredQuestions.size === sections[currentSection].quiz.length) {
                allAnswered = true;
                endQuiz();
            }
        }
        
        function startTimer() {
            startTime = new Date();
            timeLeft = 900;
            const timerEl = document.getElementById('timer');
            timerEl.innerText = '15:00';
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                if (timeLeft <= 0) {
                    endQuiz();
                    return;
                }
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerEl.innerText = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }, 1000);
        }

        function endQuiz() {
            clearInterval(timerInterval);
            
            const endTime = new Date();
            const elapsedTime = Math.floor((endTime - startTime) / 1000);
            const elapsedMinutes = Math.floor(elapsedTime / 60);
            const elapsedSeconds = elapsedTime % 60;
            
            document.getElementById('quiz-questions').classList.add('hidden');
            const resultsDiv = document.getElementById('quiz-results');
            const scoreText = document.getElementById('score-text');
            
            let timeString = '';
            if (elapsedMinutes > 0) {
                timeString += `${elapsedMinutes} minuto${elapsedMinutes > 1 ? 's' : ''} y `;
            }
            timeString += `${elapsedSeconds} segundo${elapsedSeconds > 1 ? 's' : ''}`;
            
            scoreText.innerHTML = `
                <p>Tiempo total: <strong>${timeString}</strong></p>
                <p>Respuestas correctas: <span class="correct-answer">${correctAnswers}</span></p>
                <p>Respuestas incorrectas: <span class="incorrect-answer">${incorrectAnswers}</span></p>
            `;
            resultsDiv.classList.remove('hidden');
            
            const backToMenuBtn = document.createElement('button');
            backToMenuBtn.onclick = showMainMenu;
            backToMenuBtn.classList.add('mt-8', 'bg-indigo-600', 'text-white', 'py-3', 'px-8', 'rounded-full', 'font-semibold', 'hover:bg-indigo-700', 'transition', 'duration-300', 'transform', 'hover:scale-105');
            backToMenuBtn.innerHTML = `<i class="fas fa-home mr-2"></i> Volver al Inicio`;
            resultsDiv.appendChild(backToMenuBtn);
        }

        function showMainMenu() {
            mainMenu.classList.remove('hidden');
            sectionTemplate.classList.add('hidden');
            quizTemplate.classList.add('hidden');
            
            correctAnswers = 0;
            incorrectAnswers = 0;
            answeredQuestions.clear();
            allAnswered = false;
            
            const resultsDiv = document.getElementById('quiz-results');
            const backToMenuBtn = resultsDiv.querySelector('button');
            if (backToMenuBtn) {
                resultsDiv.removeChild(backToMenuBtn);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            showMainMenu();
        });
    </script>
</body>
</html>
